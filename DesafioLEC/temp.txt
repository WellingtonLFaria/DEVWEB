create database dbpratica03;

use dbpratica03;

create table departamento(
    COD_DEPART INT NOT NULL PRIMARY KEY,
    NOME VARCHAR(30) NOT NULL,
    DATA_INICIAL DATE
);

create table funcionario(
    COD_FUNC INT NOT NULL PRIMARY KEY,
    NOME VARCHAR(100) NOT NULL,
    CPF VARCHAR(15) UNIQUE,
    SALARIO DECIMAL(4,2),
    ENDERECO VARCHAR(252),
    SEXO char(1),
    COD_SUPER INT NOT NULL,
    COD_DEPART INT NOT NULL,
    CONSTRAINT CK_SEXO CHECK(SEXO in ('M', 'F')),
    CONSTRAINT FK_COD_SUPERF FOREIGN KEY (COD_SUPER) REFERENCES funcionario(COD_FUNC),
    CONSTRAINT FK_COD_DEPART FOREIGN KEY (COD_DEPART) REFERENCES departamento(COD_DEPART)
);

create table localizacao(
    LOCALA INT,
    COD_DEPART INT NOT NULL,
    CONSTRAINT FK_COD_DEPARTL FOREIGN KEY (COD_DEPART) REFERENCES departamento(COD_DEPART),
    PRIMARY KEY(LOCALA, COD_DEPART)
);

create table dependente(
    NOME VARCHAR(100) NOT NULL,
    PARENTESCO VARCHAR(30) NOT NULL,
    DATA_NASC DATE,
    COD_FUNC INT,
    SEQ INT PRIMARY KEY,
    CONSTRAINT CK_PARENTESCO CHECK(PARENTESCO in ("PAI", "MÃE", "IRMÃOS", "FILHO")),
    CONSTRAINT FK_COD_FUNCD FOREIGN KEY (COD_FUNC) REFERENCES funcionario(COD_FUNC)
);

create table projeto(
    COD_PROJ INT PRIMARY KEY,
    COD_DEPART INT,
    TITULO VARCHAR(150) NOT NULL,
    DESCRICAO VARCHAR(252),
    DATA_CAD DATE,
    CONSTRAINT FK_COD_DEPARTP FOREIGN KEY (COD_DEPART) REFERENCES departamento(COD_DEPART)
);

create table participa(
    COD_FUNC INT,
    COD_PROJ INT PRIMARY KEY,
    HORAS VARCHAR(50),
    CONSTRAINT COD_FUNCP FOREIGN KEY (COD_FUNC) REFERENCES funcionario(COD_FUNC),
    CONSTRAINT COD_PROJP FOREIGN KEY (COD_PROJ) REFERENCES projeto(COD_PROJ)
);

describe departamento;

select *
from information_schema.table_constraints
where constraint_schema = 'dbpratica03'